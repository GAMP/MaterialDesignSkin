<UserControl x:Class="MaterialDesignSkin.Views.HomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:lc="clr-namespace:MaterialDesignSkin.Controls"
             xmlns:sif="clr-namespace:SkinInterfaces;assembly=DataInterfaces"
             mc:Ignorable="d"
             d:DesignHeight="300"
             d:DesignWidth="300">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="780" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <ScrollViewer Grid.Column="1"
                      VerticalAlignment="Top"
                      HorizontalAlignment="Stretch"
                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled">
            <Viewbox StretchDirection="DownOnly">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0"
                                   Text="NEW GAMES"
                                   Margin="0,6,0,8"
                                   Style="{StaticResource MaterialDesignTitleTextBlock}" />
                        <ItemsControl Grid.Row="1"
                                      ItemsSource="{Binding Apps.RecentlyAddedApps}"
                                      ItemTemplate="{StaticResource _APP_DISPLAY_NEW_TEMPLATE}">
                            <ItemsControl.Template>
                                <ControlTemplate>
                                    <ItemsPresenter />
                                </ControlTemplate>
                            </ItemsControl.Template>
                        </ItemsControl>
                    </Grid>
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0"
                                   Text="TOP RATED"
                                   Margin="0,6,0,8"
                                   Style="{StaticResource MaterialDesignTitleTextBlock}" />
                        <ItemsControl Grid.Row="1"
                                      ItemsSource="{Binding Apps.TopRatedApps}"
                                      ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                      ItemTemplate="{StaticResource _APP_DISPLAY_TOP_RATED_TEMPLATE}">
                            <ItemsControl.Template>
                                <ControlTemplate>
                                    <ItemsPresenter />
                                </ControlTemplate>
                            </ItemsControl.Template>
                        </ItemsControl>
                    </Grid>
                    <Grid Grid.Row="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0"
                                   Text="MOST POPULAR"
                                   Margin="0,6,0,8"
                                   Style="{StaticResource MaterialDesignTitleTextBlock}" />
                        <ItemsControl Grid.Row="1"
                                      ItemsSource="{Binding Apps.TopUsedApps}"
                                      ItemTemplate="{StaticResource _APP_DISPLAY_MOST_POPULAR_TEMPLATE}">
                            <ItemsControl.Template>
                                <ControlTemplate>
                                    <ItemsPresenter />
                                </ControlTemplate>
                            </ItemsControl.Template>
                        </ItemsControl>
                    </Grid>
                </Grid>
            </Viewbox>
        </ScrollViewer>
        <Grid Grid.Column="0"
              Margin="4,0,4,0"
              Background="Transparent"
              sif:MouseBehaviour.MouseUpCommand="{Binding MouseCommand}"
              DataContext="{Binding News}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <md:Transitioner Background="Transparent"
                             AutoApplyTransitionOrigins="True"
                             Grid.Column="0"
                             Grid.ColumnSpan="3"
                             ItemsSource="{Binding ItemsView}"
                             SelectedIndex="{Binding SelectedIndex}">
                <md:Transitioner.Resources>
                    <Style TargetType="md:TransitionerSlide">
                        <Setter Property="BackwardWipe">
                            <Setter.Value>
                                <md:SlideWipe Direction="Right"
                                              Duration="0:0:0.5" />
                            </Setter.Value>
                        </Setter>
                        <Setter Property="ForwardWipe">
                            <Setter.Value>
                                <md:SlideWipe Direction="Left"
                                              Duration="0:0:0.5" />
                            </Setter.Value>
                        </Setter>
                    </Style>
                </md:Transitioner.Resources>
                <md:Transitioner.ItemTemplate>
                    <DataTemplate>
                        <ScrollViewer VerticalScrollBarVisibility="Hidden"
                                      HorizontalScrollBarVisibility="Disabled">
                            <Grid VerticalAlignment="Top">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Row="0"
                                               Style="{StaticResource MaterialDesignDisplay1TextBlock}"
                                               TextWrapping="NoWrap"
                                               TextTrimming="CharacterEllipsis"
                                               Text="{Binding Title,Converter={StaticResource ToUpperConverter}}" />
                                    <Button VerticalAlignment="Top"
                                            HorizontalAlignment="Right"
                                            Grid.Column="1"
                                            Visibility="{Binding IsEnabled,RelativeSource={RelativeSource Self},Converter={StaticResource BoolToVisibilityConverter}}"
                                            Style="{StaticResource MaterialDesignFlatButton}"
                                            Command="{Binding ExecuteCommand}">
                                        <Grid Grid.Row="3">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <md:PackIcon Kind="LinkVariant"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center" />
                                            <TextBlock VerticalAlignment="Center"
                                                       HorizontalAlignment="Center"
                                                       Grid.Column="1"
                                                       Margin="2"
                                                       Text="DETAILS" />
                                        </Grid>
                                    </Button>
                                </Grid>
                                <Grid Grid.Row="1"
                                      Background="Transparent"
                                      Cursor="Hand"
                                      Visibility="{Binding HasMedia,Converter={StaticResource BoolToVisibilityConverter}}">
                                    <Grid.InputBindings>
                                        <MouseBinding MouseAction="LeftClick"
                                                      Command="{Binding ExecuteMediaCommand}" />
                                    </Grid.InputBindings>
                                    <Image VerticalAlignment="Stretch"
                                           MinHeight="320"
                                           HorizontalAlignment="Stretch"
                                           Source="{Binding ImageData.Result,Converter={StaticResource NullImageSourceConverter}}" />
                                    <md:PackIcon>
                                        <md:PackIcon.Style>
                                            <Style TargetType="md:PackIcon"
                                                   BasedOn="{StaticResource _NO_IMAGE_ICON_STYLE}">
                                                <Setter Property="Kind"
                                                        Value="FileImage" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding MediaType}"
                                                                 Value="1">
                                                        <Setter Property="Kind"
                                                                Value="Video" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding MediaType}"
                                                                 Value="2">
                                                        <Setter Property="Kind"
                                                                Value="Image" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </md:PackIcon.Style>
                                    </md:PackIcon>
                                    <ProgressBar Margin="8"
                                                 HorizontalAlignment="Center"
                                                 VerticalAlignment="Center"
                                                 IsIndeterminate="True"
                                                 Visibility="{Binding ImageData.IsNotCompleted, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                 Style="{StaticResource MaterialDesignCircularProgressBar}" />
                                </Grid>
                                <Grid Grid.Row="2">
                                    <ContentControl>
                                        <ContentControl.Style>
                                            <Style TargetType="ContentControl">
                                                <Setter Property="Content">
                                                    <Setter.Value>
                                                        <TextBlock VerticalAlignment="Center"
                                                                   HorizontalAlignment="Left"
                                                                   TextWrapping="Wrap"
                                                                   Style="{StaticResource MaterialDesignHeadlineTextBlock}"
                                                                   Text="{Binding Data}" />
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsDataHtml}"
                                                                 Value="True">
                                                        <Setter Property="Content">
                                                            <Setter.Value>
                                                                <lc:ExtendedRichTextbox Grid.Row="1"
                                                                                        Padding="0"
                                                                                        Background="Transparent"
                                                                                        BorderThickness="0"
                                                                                        Document="{Binding Data, Converter={StaticResource HTMLConverter}, Mode=TwoWay}"
                                                                                        IsDocumentEnabled="True"
                                                                                        IsReadOnly="True"
                                                                                        IsReadOnlyCaretVisible="False"
                                                                                        IsUndoEnabled="False" />
                                                            </Setter.Value>
                                                        </Setter>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ContentControl.Style>
                                    </ContentControl>
                                </Grid>
                            </Grid>
                        </ScrollViewer>
                    </DataTemplate>
                </md:Transitioner.ItemTemplate>
            </md:Transitioner>
            <Button Command="{Binding MovePreviousCommand}"
                    x:Name="_MOVE_PREVIOUS_BUTTON"
                    Margin="-32,0,0,0"
                    Padding="0"
                    Opacity="0"
                    Height="64"
                    md:RippleAssist.IsDisabled="True"
                    Style="{StaticResource MaterialDesignToolButton}">
                <md:PackIcon Width="64"
                             Height="64"
                             Kind="ArrowLeftBoldCircle" />
            </Button>
            <Button Command="{Binding MoveNextCommand}"
                    x:Name="_MOVE_NEXT_BUTTON"
                    Margin="0,0,-32,0"
                    Grid.Column="2"
                    Padding="0"
                    Opacity="0"
                    Height="64"
                    md:RippleAssist.IsDisabled="True"
                    Style="{StaticResource MaterialDesignToolButton}">
                <md:PackIcon Width="64"
                             Height="64"
                             Kind="ArrowRightBoldCircle" />
            </Button>
            <Grid.Triggers>
                <EventTrigger RoutedEvent="Mouse.MouseEnter">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Duration="0:0:0.150"
                                             To="1"
                                             Storyboard.TargetName="_MOVE_PREVIOUS_BUTTON"
                                             Storyboard.TargetProperty="Opacity" />
                            <DoubleAnimation Duration="0:0:0.150"
                                             To="1"
                                             Storyboard.TargetName="_MOVE_NEXT_BUTTON"
                                             Storyboard.TargetProperty="Opacity" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
                <EventTrigger RoutedEvent="Mouse.MouseLeave">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Duration="0:0:0.150"
                                             To="0"
                                             Storyboard.TargetName="_MOVE_PREVIOUS_BUTTON"
                                             Storyboard.TargetProperty="Opacity" />
                            <DoubleAnimation Duration="0:0:0.150"
                                             To="0"
                                             Storyboard.TargetName="_MOVE_NEXT_BUTTON"
                                             Storyboard.TargetProperty="Opacity" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Grid.Triggers>
        </Grid>
    </Grid>
</UserControl>
